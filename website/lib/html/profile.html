<header class="top">
  <div class="container text-center">
    <h1>%USERNAME%</h1>
  </div>
  <div class="container text-center">
    <div id='ranks' style='width: 100%; height: 400px;'></div>
    <div><button class='btn btn-primary collapsebtn' type='button' data-toggle='collapse' data-target='#global' aria-expanded="true" aria-controls="global">Collapse Global stats</button></div>
    <div id="global" aria-expanded="true" class="collapse in">
      <div id='keytaps' style='width: 100%; height: 400px;'></div>
      <div id='clicks' style='width: 100%; height: 400px;'></div>
      <div id='download' style='width: 100%; height: 400px;'></div>
      <div id='upload' style='width: 100%; height: 400px;'></div>
      <div id='uptime' style='width: 100%; height: 400px;'></div>
    </div>
    <div><button class='btn btn-primary collapsebtn' type='button' data-toggle='collapse' data-target='#app' aria-expanded="true" aria-controls="app">Collapse App stats</button></div>
    <div id="app" aria-expanded="true" class="collapse in">
      <div id='app_keytaps' style='width: 100%; height: 400px;'></div>
      <div id='app_clicks' style='width: 100%; height: 400px;'></div>
      <div id='app_uptime' style='width: 100%; height: 400px;'></div>
    </div>
    <div><button class='btn btn-primary collapsebtn' type='button' data-toggle='collapse' data-target='#computer' aria-expanded="true" aria-controls="computer">Collapse Computer stats</button></div>
    <div id="computer" aria-expanded="true" class="collapse in">
      <div id='computer_keytaps' style='width: 100%; height: 400px;'></div>
      <div id='computer_clicks' style='width: 100%; height: 400px;'></div>
      <div id='computer_download' style='width: 100%; height: 400px;'></div>
      <div id='computer_upload' style='width: 100%; height: 400px;'></div>
      <div id='computer_uptime' style='width: 100%; height: 400px;'></div>
    </div>
  </div>
</header>

<script>
  
  function loadAllGraphs() {
    loadRankGraph();
    loadGraph("keytaps");
    loadGraph("clicks");
    loadGraph("download");
    loadGraph("upload");
    loadGraph("uptime");
    
    loadAppGraph("keytaps");
    loadAppGraph("clicks");
    loadAppGraph("uptime");
    
    loadComputerGraph("keytaps");
    loadComputerGraph("clicks");
    loadComputerGraph("download");
    loadComputerGraph("upload");
    loadComputerGraph("uptime");
  }
    
  function loadRankGraph(type) {
    let layout = {
      title: "Ranks",
      plot_bgcolor:"#3d3136",
      yaxis: {
        autorange: 'reversed',
        type: 'log',
      },
      paper_bgcolor:"#30252a",
      font: {
        color: "#ffffff"
      }
    };
    $.getJSON('/data/getUserRanks.php?user=%USERID%', function (data) {
      Plotly.newPlot("ranks", data, layout);
    });
  }
  
  function loadGraph(type) {
    let layout = {
      title: type.charAt(0).toUpperCase() + type.slice(1),
      plot_bgcolor:"#3d3136",
      paper_bgcolor:"#30252a",
      font: {
        color: "#ffffff"
      }
    };
    $.getJSON('/data/getUserTotals.php?user=%USERID%&data='+type, function (data) {
      Plotly.newPlot(type, data, layout);
    });
  }
  
  function loadAppGraph(type) {
    let layout = {
      title: type.charAt(0).toUpperCase() + type.slice(1),
      plot_bgcolor:"#3d3136",
      paper_bgcolor:"#30252a",
      yaxis: {
        type: 'log',
      },
      font: {
        color: "#ffffff"
      }
    };
    $.getJSON('/data/getUserAppsHist.php?user=%USERID%&data='+type, function (data) {
      Plotly.newPlot("app_"+type, data, layout);
    });
  }
  
  function loadComputerGraph(type) {
    let layout = {
      title: type.charAt(0).toUpperCase() + type.slice(1),
      plot_bgcolor:"#3d3136",
      paper_bgcolor:"#30252a",
      yaxis: {
        type: 'log',
      },
      font: {
        color: "#ffffff"
      }
    };
    $.getJSON('/data/getUserComputersHist.php?user=%USERID%&data='+type, function (data) {
      Plotly.newPlot("computer_"+type, data, layout);
    });
  }

  $(document).ready(loadAllGraphs());
</script>